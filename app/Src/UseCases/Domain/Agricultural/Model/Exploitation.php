<?php


namespace App\Src\UseCases\Domain\Agricultural\Model;


use App\Src\UseCases\Domain\Ports\ExploitationRepository;

class Exploitation
{
    private $uid;
    private $postalCode;
    private $farmingType;
    private $exploitationRepository;

    public function __construct(string $id, string $postalCode, array $farmingType = [])
    {
        $this->uid = $id;
        $this->postalCode = $postalCode;
        $this->farmingType = $farmingType;
        $this->exploitationRepository = app(ExploitationRepository::class);
    }

    public function create(string $userId)
    {
        $this->exploitationRepository->add($this, $userId);
    }

    public function toArray()
    {
        return [
            'uuid' => $this->uid,
            'postal_code' => $this->postalCode,
            'farmings' => json_encode($this->farmingType),
        ];
    }
}
