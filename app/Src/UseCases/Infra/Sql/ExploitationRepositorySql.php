<?php


namespace App\Src\UseCases\Infra\Sql;


use App\Src\UseCases\Domain\Agricultural\Model\Exploitation;
use App\Src\UseCases\Domain\Ports\ExploitationRepository;
use App\User;
use Illuminate\Support\Facades\DB;

class ExploitationRepositorySql implements ExploitationRepository
{
    public function getByUser(string $userId)
    {
        $user = User::find($userId);

    }

    public function add(Exploitation $exploitation, string $userId)
    {
        $exploitationData = $exploitation->toArray();
        $exploitationId = DB::table('exploitations')->insert($exploitationData);

        $user = User::where('uuid', $userId)->first();
        $user->exploitation_id = $exploitationId;
        $user->save();
    }
}
